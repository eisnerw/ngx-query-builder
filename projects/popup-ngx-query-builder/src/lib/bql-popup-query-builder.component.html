<div class="bql-container">
  <button type="button" class="search" (click)="openBuilder()">
    <i class="pi pi-search"></i>
  </button>
  <div class="text-display" *ngIf="!editing" (click)="editing = true">
    <span *ngIf="queryText; else placeholderTmpl">{{ queryText }}</span>
    <ng-template #placeholderTmpl><em>{{ placeholder }}</em></ng-template>
  </div>
  <input *ngIf="editing" pInputText [(ngModel)]="queryText" (blur)="editing = false"/>
  <button type="button" class="accept" (click)="editing = false">
    <i class="pi pi-check"></i>
  </button>
  <button type="button" class="cancel" (click)="editing = false">
    <i class="pi pi-times"></i>
  </button>
</div>
<p-dialog [(visible)]="showBuilder" [modal]="true" [style]="{width: '50vw'}">
  <ng-template pTemplate="header">Query Builder</ng-template>
  <ngx-query-builder [(ngModel)]="currentQuery" [config]="config"></ngx-query-builder>
  <ng-template pTemplate="footer">
    <button pButton type="button" label="Cancel" class="p-button-text" (click)="closeBuilder(false)"></button>
    <button pButton type="button" label="Ok" (click)="closeBuilder(true)"></button>
  </ng-template>
</p-dialog>
